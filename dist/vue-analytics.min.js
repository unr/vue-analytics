/*!
 * vue-analytics v2.4.0
 * (c) 2017 Matteo Gabriele
 * Released under the ISC License.
 */
!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):e.VueAnalytics=n()}(this,function(){"use strict";var e=function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];console.warn("[VueAnalytics] "+n.join(" "))},n=function(e){return!(!o.ignoreRoutes.length||o.ignoreRoutes.indexOf(e)===-1)},t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o={debug:{enabled:!1,trace:!1,sendHitTask:!0},autoTracking:!0,id:null,userId:null,manual:!1,ignoreRoutes:[]},a=function e(n,o){return Object.keys(o).forEach(function(a){return n[a]&&"object"===t(n[a])?void e(n[a],o[a]):void(n[a]=o[a])}),n},i=function(n){if("boolean"==typeof n.debug){var t="https://github.com/MatteoGabriele/vue-analytics#debug";e("Please use the new debug setup",t)}return a(o,n)},r=function(){if("undefined"!=typeof window.ga){for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];if(o.length)return"object"===t(o[0])&&o[0].constructor===Object?void window.ga("set",o[0]):o.length<2||"string"!=typeof o[0]&&"string"!=typeof o[1]?void e("$ga.set needs a field name and a field value, or you can pass an object literal"):void window.ga("set",o[0],o[1])}},d=function(){return new Promise(function(e,n){var t=document.createElement("script"),a=o.userId||{},i=o.debug.enabled?"_debug":"",d="https://www.google-analytics.com/analytics"+i+".js",u=document.getElementsByTagName("script")[0];t.async=1,u.parentNode.insertBefore(t,u),t.onload=t.onreadystatechange=function(i,d){if(d||!t.readyState||/loaded|complete/.test(t.readyState)){if(t.onload=t.onreadystatechange=null,t=void 0,d)return n({error:!0,id:o.id});o.debug.enabled&&(window.ga_debug={trace:o.debug.trace}),window.ga("create",o.id,"auto",a),o.debug.sendHitTask||r("sendHitTask",null),window.ga("send","pageview"),e({success:!0,id:o.id})}},t.src=d})},u=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";"undefined"!=typeof window.ga&&window.ga("send","pageview",{page:e,title:n,location:t})},c=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;"undefined"!=typeof window.ga&&window.ga("send","event",e,n,t,o)},f=function(e,n,t){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";"undefined"!=typeof window.ga&&window.ga("send","timing",e,n,t,o)},s=function(e,n,t,o,a,i){"undefined"!=typeof window.ga&&window.ga("ecommerce:addTransaction",{id:e,name:n,sku:t,category:o,price:a,quantity:i})},l=function(e,n,t,o,a){"undefined"!=typeof window.ga&&window.ga("ecommerce:addTransaction",{id:e,affilication:affilication,revenue:t,shipping:o,tax:a})},g=function(t){if(o.manual&&!t&&o.autoTracking){var a="https://github.com/MatteoGabriele/vue-analytics#auto-tracking";return void e("auto-tracking doesn't work without a router instance.",a)}if(o.autoTracking&&t){var i=t.currentRoute;n(i.name)||u(i.path,i.name,window.location.href),t.afterEach(function(e){var t=e.path,o=e.name;n(o)||u(t,o,window.location.href)})}},y=function(){"undefined"!=typeof window.ga&&window.ga("ecommerce:send")},w=function(n,t){if(!o.manual){if(!o.id){var a="https://github.com/MatteoGabriele/vue-analytics#usage";return void e("Please enter a Google Analaytics tracking ID",a)}d().then(function(o){return o.error?void e("Ops! Could't load the Google Analytics script"):(t&&"function"==typeof t&&t(),void g(n))})}},p=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=n.router;delete n.router,i(n),w(t,n.onAnalyticsReady);var o={trackEvent:c,trackPage:u,trackTime:f,trackItem:s,trackTransaction:l,send:y,set:r};e.prototype.$ga=e.$ga=o},v={install:p,loadScript:d,autoTracking:g};return v});